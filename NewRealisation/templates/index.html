<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–∏</title>
</head>
<body>
    <h1>üé¨ –ú–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–∏</h1>

    <button onclick="start()">–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
    <button onclick="stop()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>

    <p><strong>–ë–∞–ª–∞–Ω—Å:</strong> <span id="balance">‚Äî</span> ‚ÇΩ</p>
    <p><strong>–•–æ–ª–¥:</strong> <span id="hold">‚Äî</span> ‚ÇΩ</p>
    <p><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∏–∑ —Ö–æ–ª–¥–∞:</strong> <span id="used">‚Äî</span> ‚ÇΩ</p>
    <p><strong>–û—Å—Ç–∞–ª–æ—Å—å –≤ —Ö–æ–ª–¥–µ:</strong> <span id="remaining">‚Äî</span> ‚ÇΩ</p>
    <p><strong>–ù—É–∂–µ–Ω –ª–∏ –Ω–æ–≤—ã–π —Ö–æ–ª–¥?</strong> <span id="needs_new_hold">–ù–µ—Ç</span></p>
    <p><strong>–í—Å–µ–≥–æ –æ–ø–ª–∞—á–µ–Ω–æ:</strong> <span id="total_used">‚Äî</span> ‚ÇΩ</p>
    <!-- <p><strong>–ü–æ–ª—É—á–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª:</strong> <span id="recipient_balance">‚Äî</span> ‚ÇΩ</p> -->

    <script>
        function updateStatus() {
            fetch('/status').then(res => res.json()).then(data => {
                document.getElementById('balance').textContent = data.balance.toFixed(2);
                document.getElementById('hold').textContent = data.hold.toFixed(2);
                document.getElementById('used').textContent = data.used.toFixed(2);
                document.getElementById('remaining').textContent = data.remaining.toFixed(2);
                document.getElementById('needs_new_hold').textContent = data.needs_new_hold ? '–î–∞' : '–ù–µ—Ç';
                document.getElementById('total_used').textContent = data.total_used.toFixed(2);
                document.getElementById('recipient_balance').textContent = data.recipient_balance.toFixed(2);
            });
        }

        setInterval(updateStatus, 100);
        updateStatus();

        function start() {
            fetch('/start', { method: 'POST' });
        }

        function stop() {
            fetch('/stop', { method: 'POST' });
        }
    </script>
</body>
</html>