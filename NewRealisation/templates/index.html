<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–∏</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 30px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #2c3e50;
        }
        button {
            padding: 10px 20px;
            margin: 10px 5px;
            font-size: 16px;
            cursor: pointer;
        }
        .status {
            margin-top: 30px;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body>
    <h1>üí∏ –°–∏—Å—Ç–µ–º–∞ –º–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–µ–π</h1>

    <button onclick="startSession()">–ù–∞—á–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
    <button onclick="stopSession()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏—é</button>

    <div class="status">
        <h2>üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:</h2>
        <pre id="status">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</pre>
    </div>

    <script>
        function authHeader() {
            return btoa("admin:securepassword123");
        }

        async function startSession() {
            const res = await fetch('/start', {
                method: 'POST',
                headers: {
                    'Authorization': 'Basic ' + authHeader()
                }
            });
            const data = await res.json();
            console.log("–°–µ—Å—Å–∏—è –Ω–∞—á–∞—Ç–∞:", data);
        }

        async function stopSession() {
            const res = await fetch('/stop', {
                method: 'POST',
                headers: {
                    'Authorization': 'Basic ' + authHeader()
                }
            });
            const data = await res.json();
            console.log("–°–µ—Å—Å–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:", data);
        }

        async function updateStatus() {
            const user = "admin";
            const pass = "securepassword123";
            const headers = new Headers();
            headers.append('Authorization', 'Basic ' + btoa(user + ":" + pass));

            const res = await fetch('/status', { headers: headers });
            const data = await res.json();
            document.getElementById('status').textContent = JSON.stringify(data, null, 2);
        }

        setInterval(updateStatus, 1000);
    </script>
</body>
</html>