<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–∏</title>
</head>
<body>
    <h1>üé¨ –ú–∏–∫—Ä–æ–ø–ª–∞—Ç–µ–∂–∏</h1>

    <button onclick="start()">–ù–∞—á–∞—Ç—å</button>
    <button onclick="stop()">–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>

    <p>–ë–∞–ª–∞–Ω—Å: <span id="balance">‚Äî</span> —Ä—É–±.</p>
    <p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: <span id="used">‚Äî</span> —Ä—É–±.</p>

    <script>
        async function updateStatus() {
            const res = await fetch('/status');
            const data = await res.json();
            document.getElementById('balance').textContent = data.balance.toFixed(2);
            document.getElementById('used').textContent = data.used.toFixed(2);
        }

        setInterval(updateStatus, 500);

        async function start() {
            await fetch('/start', { method: 'POST' });
            console.log("–°–µ—Å—Å–∏—è –Ω–∞—á–∞—Ç–∞");
        }

        async function stop() {
            await fetch('/stop', { method: 'POST' });
            console.log("–°–µ—Å—Å–∏—è –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞");
        }
    </script>
</body>
</html>